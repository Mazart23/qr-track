import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import AsyncStorage from '@react-native-async-storage/async-storage';

const LANGUAGE_KEY = '@language';

const resources = {
  en: {
    translation: {
      devices: 'Machines',
      reports: 'Reports',
      newQRs: 'New QRs',
      settings: 'Settings',
      generateQRCodes: 'Generate QR Codes',
      scanQRCode: 'Scan QR Code',
      noDevicesYet: 'No machines yet',
      noReportsYet: 'No reports yet',
      count: 'Count',
      size: 'Size in mm',
      generate: 'Generate',
      language: 'Language',
      english: 'English',
      polish: 'Polish',
      theme: 'Theme',
      lightMode: 'Light Mode',
      darkMode: 'Dark Mode',
      reportInterval: 'Report Interval',
      day: 'day',
      days: 'days',
      interval30: '1 month (30 days)',
      interval60: '2 months (60 days)',
      interval90: '3 months (90 days)',
      interval120: '4 months (120 days)',
      interval180: '6 months (180 days)',
      interval365: '1 year (365 days)',
      edit: 'Edit',
      delete: 'Delete',
      save: 'Save',
      confirmDelete: 'Confirm Delete',
      confirmDeleteDevice: 'Are you sure you want to delete this machine?',
      confirmDeleteDeviceWithReports_one: 'Are you sure you want to delete this machine? This will also delete {{count}} related report.',
      confirmDeleteDeviceWithReports_other: 'Are you sure you want to delete this machine? This will also delete {{count}} related reports.',
      confirmDeleteReport: 'Are you sure you want to delete this report?',
      deviceDeleted: 'Machine deleted',
      reportDeleted: 'Report deleted',
      deviceUpdated: 'Machine updated',
      reportUpdated: 'Report updated',
      lastReport: 'Last Report',
      noReportsYetForDevice: 'No reports yet',
      location: 'Location',
      noLocation: 'No location data',
      addNewDevice: 'Add New Machine',
      addReport: 'Add Report',
      qrCode: 'QR Code',
      deviceName: 'Machine Name',
      machineType: 'Machine Type',
      serialNumber: 'Serial Number',
      addDevice: 'Add Machine',
      machineTypes: 'Machine Types',
      addMachineType: 'Add Machine Type',
      editMachineType: 'Edit Machine Type',
      machineTypeName: 'Machine Type Name',
      confirmDeleteType: 'Confirm Delete Type',
      confirmDeleteTypeWithMachines_one: 'Are you sure you want to delete this machine type? This will also delete {{count}} machine and all its reports.',
      confirmDeleteTypeWithMachines_other: 'Are you sure you want to delete this machine type? This will also delete {{count}} machines and all their reports.',
      confirmEditTypeWithMachines_one: 'This machine type is used by {{count}} machine. Are you sure you want to edit it?',
      confirmEditTypeWithMachines_other: 'This machine type is used by {{count}} machines. Are you sure you want to edit it?',
      machineTypeAdded: 'Machine type added',
      machineTypeUpdated: 'Machine type updated',
      machineTypeDeleted: 'Machine type deleted',
      enterMachineTypeName: 'Please enter machine type name',
      machineTypeExists: 'Machine type with this name already exists',
      selectMachineType: 'Select Machine Type',
      color: 'Color',
      icon: 'Icon',
      add: 'Add',
      change: 'Change',
      machineDetails: 'Machine Details',
      reportDetails: 'Report Details',
      machineImage: 'Machine Image',
      addImage: 'Add Image',
      changeImage: 'Change Image',
      removeImage: 'Remove Image',
      confirmRemoveImage: 'Are you sure you want to remove the image?',
      imageRemoved: 'Image removed',
      invalidImageAspectRatio: 'Image aspect ratio must be between 1:1 and 2400:1080 (height:width)',
      imagePermissionRequired: 'Media library permission required',
      imageResolutionTooHigh: 'Image resolution must not exceed 1080x2400',
      enterSerialNumber: 'Please enter serial number',
      serialNumberExists: 'Machine with this serial number already exists',
      noMachineTypes: 'No machine types yet. Add one in Machine Types settings.',
      editQRCode: 'Edit QR Code',
      removeQRCode: 'Remove QR Code',
      scanNewQRCode: 'Scan New QR Code',
      qrCodeAlreadyAssigned: 'This QR code is already assigned to another machine',
      qrCodeUpdated: 'QR code updated',
      qrCodeRemoved: 'QR code removed',
      confirmRemoveQRCode: 'Are you sure you want to remove the QR code from this machine?',
      noQRCode: 'No QR Code',
      createdAt: 'Created At',
      updatedAt: 'Updated At',
      machine: 'Machine',
      cancel: 'Cancel',
      reportDescription: 'Report Description',
      submitReport: 'Submit Report',
      close: 'Close',
      cameraPermissionRequired: 'Camera permission required',
      grantPermission: 'Grant Permission',
      error: 'Error',
      success: 'Success',
      enterDeviceName: 'Please enter machine name',
      deviceNameExists: 'Machine with this name already exists',
      deviceAddedSuccessfully: 'Machine added successfully',
      failedToAddDevice: 'Failed to add machine',
      enterReportDescription: 'Please enter report description',
      reportAddedSuccessfully: 'Report added successfully',
      failedToAddReport: 'Failed to add report',
      enterCountBetween: 'Enter count between 1-50',
      enterSizeBetween: 'Enter size between 20-100 [mm]',
      fileNotSupportedOnWeb: 'File generation not supported on web. Use mobile app.',
      fileGeneratedSuccessfully: 'File generated successfully',
      failedToGenerateFile: 'Failed to generate file',
      newVersionAvailable: 'New version available',
      newVersionMessage: 'Version {{version}} is available. Do you want to download it?',
      later: 'Later',
      download: 'Download',
      selectCount: 'Please select count',
      selectSize: 'Please select size',
      showAllReports: 'Show All Reports',
      allReports: 'All Reports',
      lastReportDate: 'Last Report Date',
    },
  },
  pl: {
    translation: {
      devices: 'Maszyny',
      reports: 'Raporty',
      newQRs: 'Nowe QR',
      settings: 'Ustawienia',
      generateQRCodes: 'Generuj kody QR',
      scanQRCode: 'Skanuj kod QR',
      noDevicesYet: 'Brak maszyn',
      noReportsYet: 'Brak raportów',
      count: 'Liczba',
      size: 'Rozmiar w mm',
      generate: 'Generuj',
      language: 'Język',
      english: 'Angielski',
      polish: 'Polski',
      theme: 'Motyw',
      lightMode: 'Jasny',
      darkMode: 'Ciemny',
      reportInterval: 'Interwał raportów',
      day: 'dzień',
      days: 'dni',
      interval30: '1 miesiąc (30 dni)',
      interval60: '2 miesiące (60 dni)',
      interval90: '3 miesiące (90 dni)',
      interval120: '4 miesiące (120 dni)',
      interval180: 'pół roku (180 dni)',
      interval365: '1 rok (365 dni)',
      edit: 'Edytuj',
      delete: 'Usuń',
      save: 'Zapisz',
      confirmDelete: 'Potwierdź usunięcie',
      confirmDeleteDevice: 'Czy na pewno chcesz usunąć tę maszynę?',
      confirmDeleteDeviceWithReports_one: 'Czy na pewno chcesz usunąć tę maszynę? Spowoduje to również usunięcie {{count}} powiązanego raportu.',
      confirmDeleteDeviceWithReports_other: 'Czy na pewno chcesz usunąć tę maszynę? Spowoduje to również usunięcie {{count}} powiązanych raportów.',
      confirmDeleteReport: 'Czy na pewno chcesz usunąć ten raport?',
      deviceDeleted: 'Maszyna usunięta',
      reportDeleted: 'Raport usunięty',
      deviceUpdated: 'Maszyna zaktualizowana',
      reportUpdated: 'Raport zaktualizowany',
      lastReport: 'Ostatni raport',
      noReportsYetForDevice: 'Brak raportów',
      location: 'Lokalizacja',
      noLocation: 'Brak danych lokalizacji',
      addNewDevice: 'Dodaj nową maszynę',
      addReport: 'Dodaj raport',
      qrCode: 'Kod QR',
      deviceName: 'Nazwa maszyny',
      machineType: 'Typ maszyny',
      serialNumber: 'Numer seryjny',
      addDevice: 'Dodaj maszynę',
      machineTypes: 'Typy maszyn',
      addMachineType: 'Dodaj typ maszyny',
      editMachineType: 'Edytuj typ maszyny',
      machineTypeName: 'Nazwa typu maszyny',
      confirmDeleteType: 'Potwierdź usunięcie typu',
      confirmDeleteTypeWithMachines_one: 'Czy na pewno chcesz usunąć ten typ maszyny? Spowoduje to również usunięcie {{count}} maszyny i wszystkich jej raportów.',
      confirmDeleteTypeWithMachines_other: 'Czy na pewno chcesz usunąć ten typ maszyny? Spowoduje to również usunięcie {{count}} maszyn i wszystkich ich raportów.',
      confirmEditTypeWithMachines_one: 'Ten typ maszyny jest używany przez {{count}} maszynę. Czy na pewno chcesz go edytować?',
      confirmEditTypeWithMachines_other: 'Ten typ maszyny jest używany przez {{count}} maszyny. Czy na pewno chcesz go edytować?',
      machineTypeAdded: 'Typ maszyny dodany',
      machineTypeUpdated: 'Typ maszyny zaktualizowany',
      machineTypeDeleted: 'Typ maszyny usunięty',
      enterMachineTypeName: 'Proszę wprowadzić nazwę typu maszyny',
      machineTypeExists: 'Typ maszyny o tej nazwie już istnieje',
      selectMachineType: 'Wybierz typ maszyny',
      color: 'Kolor',
      icon: 'Ikona',
      add: 'Dodaj',
      change: 'Zmień',
      machineDetails: 'Szczegóły maszyny',
      reportDetails: 'Szczegóły raportu',
      machineImage: 'Zdjęcie maszyny',
      addImage: 'Dodaj zdjęcie',
      changeImage: 'Zmień zdjęcie',
      removeImage: 'Usuń zdjęcie',
      confirmRemoveImage: 'Czy na pewno chcesz usunąć zdjęcie?',
      imageRemoved: 'Zdjęcie usunięte',
      invalidImageAspectRatio: 'Proporcje zdjęcia muszą być między 1:1 a 2400:1080 (wysokość:szerokość)',
      imagePermissionRequired: 'Wymagane uprawnienie do biblioteki multimediów',
      imageResolutionTooHigh: 'Rozdzielczość zdjęcia nie może przekraczać 1080x2400',
      enterSerialNumber: 'Proszę wprowadzić numer seryjny',
      serialNumberExists: 'Maszyna o tym numerze seryjnym już istnieje',
      noMachineTypes: 'Brak typów maszyn. Dodaj jeden w ustawieniach Typy maszyn.',
      editQRCode: 'Edytuj kod QR',
      removeQRCode: 'Usuń kod QR',
      scanNewQRCode: 'Skanuj nowy kod QR',
      qrCodeAlreadyAssigned: 'Ten kod QR jest już przypisany do innej maszyny',
      qrCodeUpdated: 'Kod QR zaktualizowany',
      qrCodeRemoved: 'Kod QR usunięty',
      confirmRemoveQRCode: 'Czy na pewno chcesz usunąć kod QR z tej maszyny?',
      noQRCode: 'Brak kodu QR',
      createdAt: 'Utworzono',
      updatedAt: 'Zaktualizowano',
      machine: 'Maszyna',
      cancel: 'Anuluj',
      reportDescription: 'Opis raportu',
      submitReport: 'Wyślij raport',
      close: 'Zamknij',
      cameraPermissionRequired: 'Wymagane uprawnienie do kamery',
      grantPermission: 'Przyznaj uprawnienie',
      error: 'Błąd',
      success: 'Sukces',
      enterDeviceName: 'Proszę wprowadzić nazwę maszyny',
      deviceNameExists: 'Maszyna o tej nazwie już istnieje',
      deviceAddedSuccessfully: 'Maszyna dodana pomyślnie',
      failedToAddDevice: 'Nie udało się dodać maszyny',
      enterReportDescription: 'Proszę wprowadzić opis raportu',
      reportAddedSuccessfully: 'Raport dodany pomyślnie',
      failedToAddReport: 'Nie udało się dodać raportu',
      enterCountBetween: 'Wprowadź liczbę między 1-50',
      enterSizeBetween: 'Wprowadź rozmiar między 20-100 [mm]',
      fileNotSupportedOnWeb: 'Generowanie pliku nie jest obsługiwane w przeglądarce. Użyj aplikacji mobilnej.',
      fileGeneratedSuccessfully: 'Plik wygenerowany pomyślnie',
      failedToGenerateFile: 'Nie udało się wygenerować pliku',
      newVersionAvailable: 'Nowa wersja dostępna',
      newVersionMessage: 'Dostępna jest wersja {{version}}. Czy chcesz ją pobrać?',
      later: 'Później',
      download: 'Pobierz',
      selectCount: 'Proszę wybrać liczbę',
      selectSize: 'Proszę wybrać rozmiar',
      showAllReports: 'Pokaż wszystkie raporty',
      allReports: 'Wszystkie raporty',
      lastReportDate: 'Data ostatniego raportu',
    },
  },
};

i18n.use(initReactI18next).init({
  resources,
  lng: 'en',
  fallbackLng: 'en',
  interpolation: {
    escapeValue: false,
  },
});

/**
 * Load saved language preference
 */
export const loadLanguage = async () => {
  const savedLang = await AsyncStorage.getItem(LANGUAGE_KEY);
  if (savedLang) {
    i18n.changeLanguage(savedLang);
  }
};

/**
 * Save language preference
 */
export const saveLanguage = async (lang: string) => {
  await AsyncStorage.setItem(LANGUAGE_KEY, lang);
  i18n.changeLanguage(lang);
};

export default i18n;
